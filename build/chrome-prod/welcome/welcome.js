var IS_DEV_BUILD=false;
(()=>{var y=Object.defineProperty;var v=(n,e)=>{for(var t in e)y(n,t,{get:e[t],enumerable:!0})};var f="screenshot",h=chrome?.i18n?.getMessage("@@extension_id"),ue=f+"/"+h,u="G-19Y7T52NBH",b="Cu0vRk7eTX21s66ymUrdIQ";var be="https://chrome.google.com/webstore/detail/"+h;async function w(){let{sessionData:n}=await chrome.storage.session.get("sessionData"),e=Date.now();return n&&n.timestamp&&((e-n.timestamp)/6e4>30?n=null:(n.timestamp=e,await chrome.storage.session.set({sessionData:n}))),n||(n={session_id:e.toString(),timestamp:e.toString()},await chrome.storage.session.set({sessionData:n})),n.session_id}var S="https://www.google-analytics.com/mp/collect",A="https://www.google-analytics.com/debug/mp/collect",E=u,F=b,I=100,l=class{debug=IS_DEV_BUILD;constructor(){}async getOrCreateClientId(){let{clientId:e}=await chrome.storage.local.get("clientId");return e||(e=self.crypto.randomUUID(),await chrome.storage.local.set({clientId:e})),e}async getSessionId(){try{return w()}catch{return new Promise(t=>{chrome.runtime.sendMessage("get_or_create_session_id",s=>{t(s)})})}}async fireEvent(e,t={}){t.session_id||(t.session_id=await this.getSessionId()),t.engagement_time_msec||(t.engagement_time_msec=I);try{let s=await fetch(`${this.debug?A:S}?measurement_id=${E}&api_secret=${F}`,{method:"POST",body:JSON.stringify({client_id:await this.getOrCreateClientId(),events:[{name:e,params:t}]})});if(!this.debug)return;console.log(await s.text())}catch(s){console.error("Google Analytics request failed with an exception",s)}}async firePageViewEvent(e,t,s={}){return this.fireEvent("page_view",{page_title:e,page_location:t,...s})}async fireErrorEvent(e,t={}){return this.fireEvent("exception",{description:e.message,...e,...t})}},ye=new l;var D=f,i=class{tag="";analytics=new l;constructor(e){this.tag=D+"."+(typeof e=="string"?e:e.constructor.name),this.listenForBgLogs()}listenForBgLogs(){chrome?.runtime?.onMessage.addListener((e,t)=>{t.id!==chrome.runtime.id||e.action!="log"||this.internalLogTagOverride(e.data.level,e.data.tag,...e.data.messages)})}debug=(...e)=>this.internalLog(3,...e);log=(...e)=>this.internalLog(2,...e);warn=(...e)=>this.internalLog(1,...e);error=(...e)=>this.internalLog(0,...e);internalLog(e,...t){this.internalLogTagOverride(e,this.tag,...t)}internalLogTagOverride(e,t,...s){let _=new Date(Date.now()),a=["%c%s %s","color: blue",`[${_.getHours()}:${_.getMinutes()}:${_.getSeconds()}]`,t,...s];if(IS_DEV_BUILD)switch(e){case 3:console.debug(...a);break;case 1:console.warn(...a);break;case 2:console.log(...a);break;case 0:console.error(...a);break}else{switch(e){case 1:this.analytics.fireErrorEvent(new Error(a.join(" ")));break;case 0:this.analytics.fireErrorEvent(new Error(a.join(" ")));break}return}}};var g={};v(g,{"@testMarkup":()=>G,All_done_:()=>te,Cloned_the_repository_at____________a_href__https___github_com_justiceo_xtension__https___github_com_justiceo_xtension__a____________and_installed_all_the_dependencies_:()=>H,Disable_storage_sync:()=>T,Disabled_on_Websites:()=>M,Enabled_dev_mode_on_Chrome_Firefox_and_installed_an_unpacked___________extension___:()=>K,Extension_will_not_run_on_these_sites__Enter_one_site_per_line_:()=>z,Glad_you_like_it__Can_you_help_us_share_the____:()=>ge,Hooray____:()=>Y,How_are_we_doing_:()=>ce,How_can_we_improve_:()=>P,I_say_that_is_great_progress_towards_creating_a_browser_extension_:()=>$,If_you_are_looking_at_this_page__you_successfully:()=>q,If_you_found_this_extension_helpful__leave_a_star_on_the_Github_Page_________or_rating_on_Chrome_Webstore_:()=>ne,Next__Pin_it:()=>V,No:()=>fe,Options:()=>ie,Rate_on_Chrome_Web_Store:()=>re,Report_an_Issue:()=>le,Share_the_love_:()=>oe,Show_Demo:()=>ae,Star_on_GitHub:()=>se,Submit_Feedback:()=>de,Successfully_updated_settings:()=>W,Temporarily_disable_extension:()=>B,Thanks_for_the_feedback_:()=>_e,Turns_off_the_extension_on_all_websites_:()=>R,Used_ESBuild_to_build_the_source_code_and_packaged_into_store_ready___________format_:()=>j,Welcome:()=>Q,Your_settings_will_not_propagate_to_other_browsers_:()=>O,_strong_1___strong__Click_on_the_extensions_icon_:()=>J,_strong_2___strong__Find__Browser_Extension_Starter__in_the_list_of_______extensions_:()=>Z,_strong_3___strong__Click_on_the_pin_icon_on_the_right_of_this_______extension_s_icon_:()=>ee,const_appDesc:()=>L,const_appName:()=>N,const_appShortName:()=>C,default:()=>pe,or_you_were_able_to_start_an_instance_of_Puppeteer_with_the___________extension_installed_:()=>X});var N={message:"Visual Snippets: Screenshot, Annotate & Share",description:"The name of the extension"},C={message:"Screenshot",description:"The short-version name of the extension name"},L={message:"Capture, annotate screenshots of webpages and share with one click",description:"The description of your extension"},G={message:"<div><p>Hello world</p>This is the <strong>language</strong> of the web</div>"},B={message:"Temporarily disable extension"},R={message:"Turns off the extension on all websites."},T={message:"Disable storage sync"},O={message:"Your settings will not propagate to other browsers."},M={message:"Disabled on Websites"},z={message:"Extension will not run on these sites. Enter one site per line."},W={message:"Successfully updated settings"},P={message:"How can we improve?"},Q={message:"Welcome"},Y={message:"Hooray! \u{1F389}"},q={message:"If you are looking at this page, you successfully"},H={message:`Cloned the repository at
<a href="https://github.com/justiceo/xtension">https://github.com/justiceo/xtension</a>
and installed all the dependencies.`},j={message:`Used ESBuild to build the source code and packaged into store-ready
format.`},K={message:`Enabled dev mode on Chrome/Firefox and installed an unpacked
extension...`},X={message:`or you were able to start an instance of Puppeteer with the
extension installed.`},$={message:"I say that is great progress towards creating a browser extension."},V={message:"Next: Pin it"},J={message:"<strong>1.</strong> Click on the extensions icon."},Z={message:`<strong>2.</strong> Find "Browser Extension Starter" in the list of
extensions.`},ee={message:`<strong>3.</strong> Click on the pin icon on the right of this
extension's icon.`},te={message:"All done."},oe={message:"Share the love!"},ne={message:`If you found this extension helpful, leave a star on the Github Page
or rating on Chrome Webstore.`},se={message:"Star on GitHub"},re={message:"Rate on Chrome Web Store"},ie={message:"Options"},ae={message:"Show Demo"},le={message:"Report an Issue"},ce={message:"How are we doing?"},ge={message:"Glad you like it! Can you help us share the \u2764\uFE0F?"},_e={message:"Thanks for the feedback!"},fe={message:"No"},de={message:"Submit Feedback"},pe={const_appName:N,const_appShortName:C,const_appDesc:L,"@testMarkup":G,Temporarily_disable_extension:B,Turns_off_the_extension_on_all_websites_:R,Disable_storage_sync:T,Your_settings_will_not_propagate_to_other_browsers_:O,Disabled_on_Websites:M,Extension_will_not_run_on_these_sites__Enter_one_site_per_line_:z,Successfully_updated_settings:W,How_can_we_improve_:P,Welcome:Q,Hooray____:Y,If_you_are_looking_at_this_page__you_successfully:q,Cloned_the_repository_at____________a_href__https___github_com_justiceo_xtension__https___github_com_justiceo_xtension__a____________and_installed_all_the_dependencies_:H,Used_ESBuild_to_build_the_source_code_and_packaged_into_store_ready___________format_:j,Enabled_dev_mode_on_Chrome_Firefox_and_installed_an_unpacked___________extension___:K,or_you_were_able_to_start_an_instance_of_Puppeteer_with_the___________extension_installed_:X,I_say_that_is_great_progress_towards_creating_a_browser_extension_:$,Next__Pin_it:V,_strong_1___strong__Click_on_the_extensions_icon_:J,_strong_2___strong__Find__Browser_Extension_Starter__in_the_list_of_______extensions_:Z,_strong_3___strong__Click_on_the_pin_icon_on_the_right_of_this_______extension_s_icon_:ee,All_done_:te,Share_the_love_:oe,If_you_found_this_extension_helpful__leave_a_star_on_the_Github_Page_________or_rating_on_Chrome_Webstore_:ne,Star_on_GitHub:se,Rate_on_Chrome_Web_Store:re,Options:ie,Show_Demo:ae,Report_an_Issue:le,How_are_we_doing_:ce,Glad_you_like_it__Can_you_help_us_share_the____:ge,Thanks_for_the_feedback_:_e,No:fe,Submit_Feedback:de};var d=new i("i18n");function me(n){let e=/^[a-zA-Z0-9_]+$/;return n.split("").map(t=>e.test(t)?t:"_").join("")}var r=n=>{if(!n)return d.error("A valid key is required for i18n, got",n),n;let e=n.startsWith("@")?n:me(n);if(chrome?.i18n&&chrome.i18n.getMessage(e)!=="")return chrome.i18n.getMessage(e);d.warn("chrome.i18n is not available in the current context, falling back to en-US"),Object.keys(g).forEach(t=>{});for(let[t,s]of Object.entries(g))if(t===e)return s.message;return d.error("No translation available for key:",n),n},x=n=>{n.querySelectorAll("[i18n]").forEach(t=>{let s=t.getAttribute("i18n");s||(s=t.innerHTML.trim()),t.innerHTML=r(s)}),n instanceof Document&&(document.title=r(document.title),document.documentElement.lang=chrome.i18n.getUILanguage()??"")};var k=[{id:"disable-extension-on-site",type:"checkbox",title:r("Temporarily disable extension"),description:r("Turns off the extension on all websites."),default_value:!1},{id:"disable-sync",type:"checkbox",title:r("Disable storage sync"),description:r("Your settings will not propagate to other browsers."),default_value:!1,dev_only:!1},{id:"blocked-sites",type:"textarea",title:r("Disabled on Websites"),description:r("Extension will not run on these sites. Enter one site per line."),default_value:""}];var p=class{storageService;constructor(){this.storageService=chrome?.storage?.local??window.localStorage}put(e,t){if(t==null)return Promise.reject("Attempting to save a null value");if(!e)return Promise.reject("Attempting to use a null key");if(!chrome?.storage?.sync)return this.storageService.setItem(e,JSON.stringify(t));let s={};return s[e]=t,this.storageService.set(s)}async get(e){return chrome?.storage?.sync?(await this.storageService.get(e))[e]:JSON.parse(this.storageService.getItem(e))}async remove(e){return e?chrome?.storage?.sync?this.storageService.remove(e):this.storageService.removeItem(e):Promise.reject("Attempting to use a null key")}async getConfig(e){return await this.get(e)??k.find(t=>t.id===e)?.default_value}getAll(){return this.storageService.get(null)}async getAndUpdate(e,t){let s=await this.get(e);return this.put(e,await t(s))}async isCurrentSiteBlocked(){let e=await this.get("blocked-sites");return!!(e&&window.location.hostname&&e.includes(window.location.hostname))}},U=new p;var c=class{logger=new i(this);init(){this.listenForBgMessage()}showDemo(){this.logger.debug("#showDemo")}listenForBgMessage(){chrome?.runtime?.onMessage?.addListener((e,t,s)=>{this.logger.debug("#onMessage: ",e),s("ok")})}};U.isCurrentSiteBlocked().then(n=>{let e=window.self===window.top;!n&&e&&new c().init()});var m=class{logger=new i(this);contentScript=new c;init(){this.contentScript.init(),x(document),document.querySelector("#demo-button")?.addEventListener("click",e=>{this.contentScript.showDemo()})}};window.addEventListener("load",n=>{new m().init()});})();
